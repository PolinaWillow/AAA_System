{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useEffect } from \"react\";\nconst storageName = 'userData';\nexport const useAuth = () => {\n  _s();\n  const [token, setToken] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [userLevel, setUserLevel] = useState(null);\n  const [userLogin, setUserLogin] = useState(null);\n\n  //Логирование\n  const login = useCallback((jwtToken, id, level, login) => {\n    //console.log(jwtToken, id, level)\n    setToken(jwtToken);\n    setUserId(id);\n    setUserLevel(level);\n    setUserLogin(login);\n\n    //Записываем в локалсторэдж токен и id\n    localStorage.setItem(storageName, JSON.stringify({\n      userId: id,\n      token: jwtToken,\n      userLevel: level,\n      userLogin: login\n    }));\n  }, []);\n\n  //Разлогирование\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n    setUserLevel(null);\n    setUserLogin(null);\n    //Очищаем локалсторэдж\n    localStorage.removeItem(storageName);\n  }, []);\n\n  //Проверка есть ли в локалсторэдже какие-либо данные\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName));\n    if (data && data.token) {\n      login(data.token, data.userId, data.userLevel, data.userLogin);\n    }\n  }, [login]);\n  return {\n    login,\n    logout,\n    token,\n    userId,\n    userLevel,\n    userLogin\n  };\n};\n_s(useAuth, \"S3hEtV6JGme+CRlfi5Wh+/VdM3Q=\");","map":{"version":3,"names":["useState","useCallback","useEffect","storageName","useAuth","_s","token","setToken","userId","setUserId","userLevel","setUserLevel","userLogin","setUserLogin","login","jwtToken","id","level","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"sources":["C:/UsersFolders/Polina/Учеба/МАГА/1 семестр/Информационная безопасность/AAA_System/client/src/hooks/auth.hook.js"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [userLevel, setUserLevel] = useState(null)\r\n    const [userLogin, setUserLogin] = useState(null)\r\n\r\n    //Логирование\r\n    const login = useCallback((jwtToken, id, level, login)=>{\r\n        //console.log(jwtToken, id, level)\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        setUserLevel(level)\r\n        setUserLogin(login)\r\n\r\n        //Записываем в локалсторэдж токен и id\r\n        localStorage.setItem(storageName, JSON.stringify({userId: id, token: jwtToken, userLevel: level, userLogin: login}))\r\n    },[])\r\n\r\n    //Разлогирование\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserId(null)\r\n        setUserLevel(null)\r\n        setUserLogin(null)\r\n        //Очищаем локалсторэдж\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n    //Проверка есть ли в локалсторэдже какие-либо данные\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if(data&&data.token){\r\n            login(data.token, data.userId, data.userLevel, data.userLogin)\r\n        }\r\n    }, [login])\r\n\r\n\r\n    return {login, logout, token, userId, userLevel, userLogin}\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAExD,MAAMC,WAAW,GAAG,UAAU;AAE9B,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAK;EAAAC,EAAA;EACxB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;;EAEhD;EACA,MAAMc,KAAK,GAAGb,WAAW,CAAC,CAACc,QAAQ,EAAEC,EAAE,EAAEC,KAAK,EAAEH,KAAK,KAAG;IACpD;IACAP,QAAQ,CAACQ,QAAQ,CAAC;IAClBN,SAAS,CAACO,EAAE,CAAC;IACbL,YAAY,CAACM,KAAK,CAAC;IACnBJ,YAAY,CAACC,KAAK,CAAC;;IAEnB;IACAI,YAAY,CAACC,OAAO,CAAChB,WAAW,EAAEiB,IAAI,CAACC,SAAS,CAAC;MAACb,MAAM,EAAEQ,EAAE;MAAEV,KAAK,EAAES,QAAQ;MAAEL,SAAS,EAAEO,KAAK;MAAEL,SAAS,EAAEE;IAAK,CAAC,CAAC,CAAC;EACxH,CAAC,EAAC,EAAE,CAAC;;EAEL;EACA,MAAMQ,MAAM,GAAGrB,WAAW,CAAC,MAAI;IAC3BM,QAAQ,CAAC,IAAI,CAAC;IACdE,SAAS,CAAC,IAAI,CAAC;IACfE,YAAY,CAAC,IAAI,CAAC;IAClBE,YAAY,CAAC,IAAI,CAAC;IAClB;IACAK,YAAY,CAACK,UAAU,CAACpB,WAAW,CAAC;EACxC,CAAC,EAAC,EAAE,CAAC;;EAEL;EACAD,SAAS,CAAC,MAAI;IACV,MAAMsB,IAAI,GAAGJ,IAAI,CAACK,KAAK,CAACP,YAAY,CAACQ,OAAO,CAACvB,WAAW,CAAC,CAAC;IAC1D,IAAGqB,IAAI,IAAEA,IAAI,CAAClB,KAAK,EAAC;MAChBQ,KAAK,CAACU,IAAI,CAAClB,KAAK,EAAEkB,IAAI,CAAChB,MAAM,EAAEgB,IAAI,CAACd,SAAS,EAAEc,IAAI,CAACZ,SAAS,CAAC;IAClE;EACJ,CAAC,EAAE,CAACE,KAAK,CAAC,CAAC;EAGX,OAAO;IAACA,KAAK;IAAEQ,MAAM;IAAEhB,KAAK;IAAEE,MAAM;IAAEE,SAAS;IAAEE;EAAS,CAAC;AAC/D,CAAC;AAAAP,EAAA,CAtCYD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}
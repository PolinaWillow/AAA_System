{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useEffect } from \"react\";\nconst storageName = 'userData';\nexport const useAuth = () => {\n  _s();\n  const [token, setToken] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [userLevel, setUserLevel] = useState(null);\n\n  //Логирование\n  const login = useCallback((jwtToken, id, level) => {\n    setToken(jwtToken);\n    setUserId(id);\n    setUserLevel(level);\n\n    //Записываем в локалсторэдж токен и id\n    localStorage.setItem(storageName, JSON.stringify({\n      userId: id,\n      token: jwtToken,\n      userLevel: level\n    }));\n  }, []);\n\n  //Разлогирование\n  const logout = useCallback(() => {\n    setToken(null);\n    setUserId(null);\n    setUserLevel(null);\n    //Очищаем локалсторэдж\n    localStorage.removeItem(storageName);\n  }, []);\n\n  //Проверка есть ли в локалсторэдже какие-либо данные\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName));\n    if (data && data.token) {\n      login(data.token, data.userId, data.userLevel);\n    }\n  }, [login]);\n  return {\n    login,\n    logout,\n    token,\n    userId\n  };\n};\n_s(useAuth, \"rMyJqms0qpHnRQdxQiQNH/nc4tw=\");","map":{"version":3,"names":["useState","useCallback","useEffect","storageName","useAuth","_s","token","setToken","userId","setUserId","userLevel","setUserLevel","login","jwtToken","id","level","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"sources":["C:/UsersFolders/Polina/Учеба/МАГА/1 семестр/Информационная безопасность/AAA_System/client/src/hooks/auth.hook.js"],"sourcesContent":["import { useState, useCallback, useEffect } from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = () =>{\r\n    const [token, setToken] = useState(null)\r\n    const [userId, setUserId] = useState(null)\r\n    const [userLevel, setUserLevel] = useState(null)\r\n\r\n    //Логирование\r\n    const login = useCallback((jwtToken, id, level)=>{\r\n        setToken(jwtToken)\r\n        setUserId(id)\r\n        setUserLevel(level)\r\n\r\n        //Записываем в локалсторэдж токен и id\r\n        localStorage.setItem(storageName, JSON.stringify({userId: id, token: jwtToken, userLevel: level}))\r\n    },[])\r\n\r\n    //Разлогирование\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserId(null)\r\n        setUserLevel(null)\r\n        //Очищаем локалсторэдж\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n    //Проверка есть ли в локалсторэдже какие-либо данные\r\n    useEffect(()=>{\r\n        const data = JSON.parse(localStorage.getItem(storageName))\r\n        if(data&&data.token){\r\n            login(data.token, data.userId, data.userLevel)\r\n        }\r\n    }, [login])\r\n\r\n\r\n    return {login, logout, token, userId}\r\n}"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAExD,MAAMC,WAAW,GAAG,UAAU;AAE9B,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAK;EAAAC,EAAA;EACxB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;;EAEhD;EACA,MAAMY,KAAK,GAAGX,WAAW,CAAC,CAACY,QAAQ,EAAEC,EAAE,EAAEC,KAAK,KAAG;IAC7CR,QAAQ,CAACM,QAAQ,CAAC;IAClBJ,SAAS,CAACK,EAAE,CAAC;IACbH,YAAY,CAACI,KAAK,CAAC;;IAEnB;IACAC,YAAY,CAACC,OAAO,CAACd,WAAW,EAAEe,IAAI,CAACC,SAAS,CAAC;MAACX,MAAM,EAAEM,EAAE;MAAER,KAAK,EAAEO,QAAQ;MAAEH,SAAS,EAAEK;IAAK,CAAC,CAAC,CAAC;EACtG,CAAC,EAAC,EAAE,CAAC;;EAEL;EACA,MAAMK,MAAM,GAAGnB,WAAW,CAAC,MAAI;IAC3BM,QAAQ,CAAC,IAAI,CAAC;IACdE,SAAS,CAAC,IAAI,CAAC;IACfE,YAAY,CAAC,IAAI,CAAC;IAClB;IACAK,YAAY,CAACK,UAAU,CAAClB,WAAW,CAAC;EACxC,CAAC,EAAC,EAAE,CAAC;;EAEL;EACAD,SAAS,CAAC,MAAI;IACV,MAAMoB,IAAI,GAAGJ,IAAI,CAACK,KAAK,CAACP,YAAY,CAACQ,OAAO,CAACrB,WAAW,CAAC,CAAC;IAC1D,IAAGmB,IAAI,IAAEA,IAAI,CAAChB,KAAK,EAAC;MAChBM,KAAK,CAACU,IAAI,CAAChB,KAAK,EAAEgB,IAAI,CAACd,MAAM,EAAEc,IAAI,CAACZ,SAAS,CAAC;IAClD;EACJ,CAAC,EAAE,CAACE,KAAK,CAAC,CAAC;EAGX,OAAO;IAACA,KAAK;IAAEQ,MAAM;IAAEd,KAAK;IAAEE;EAAM,CAAC;AACzC,CAAC;AAAAH,EAAA,CAlCYD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}